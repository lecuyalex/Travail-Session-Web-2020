<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Information du compte</title>
    <link rel="stylesheet" href="../css/Style-Accueil.css">
    <link rel="stylesheet" href="../css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="../js/accueil.js"></script>
    <link rel="icon" type="image/png" href="../img/logo_white.png" style="color: white">
    <script src="https://kit.fontawesome.com/86aa9796b2.js" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            let url = new URL(window.location.href);
            let user = url.searchParams.get("user")
            if (user) {
                $.ajax({
                    url: "../bd.php",
                    type: "POST",
                    dataType: "json",
                    data: {
                        "requete": "selectUser",
                        "email": user
                    },
                    success: function (reponse) {
                        console.log(reponse)
                        $('#prenom').val(reponse['Prenom'])
                        $('#nom').val(reponse['Nom'])
                        $('#email').val(reponse['Courriel'])
                        $('#phone').val(reponse['No_Telephone'])
                    },
                    error: function (message, e) {
                        console.log(message)
                    }
                });
            } /* else
              window.location.href = "login.html";*/


            $('.form_info').on('submit', function (e) {
                e.preventDefault()
                $.ajax({
                    url: "../bd.php",
                    type: "POST",
                    dataType: "json",
                    data: {
                        "requete": "changeInfo",
                        "email": $("#email").val(),
                        "prenom": $("#prenom").val(),
                        "nom": $("#nom").val(),
                        "phone": $("#phone").val()
                    },
                    success: function (reponse) {
                    alert("Les informations ont été mis à jour")
                    },
                    error: function (message, e) {
                        console.log(message)
                    }
                });
            });

            $('.form_password').on('submit', function (e) {
                e.preventDefault()

            })
        })
    </script>
</head>

<!--Body du site-->
<body style="background-color:#f8f9f9">

<!--Partie principale du site-->
<header>

    <div class="logo_container">
        <img src="Ressources-Supplementaires/logo.png">
    </div>
    <p>Compte > Information</p>
    <div class="searchbar">
        <input class="search_text" name="search_text" placeholder="Recherche..." type="text"/>
        <button class="btSearch"><i class="fas fa-search"></i></button>
    </div>
    <div class="header-user">

        <a id="login-btn" class="login" href="login.html">Se connecter</a>
        <a id="user-btn" class="user-btn" href="signin.html">Créer un compte</a>

    </div>
    </div>


</header>
<div class="change_div">
    <div class="change_info">
        <form class="form_info" id="form_info">
            <h2 class="title">Changer les information</h2>
            <label class="typeInsert" for="email">Courriel</label>
            <div class="input-field">
                <input type="email" id="email" name="email"/>
                <i class="fas fa-envelope"></i>
            </div>
            <label class="typeInsert" for="prenom">Prenom</label>
            <div class="input-field">
                <input type="text" id="prenom" name="prenom"/>
                <i class="far fa-id-card"></i>
            </div>
            <label class="typeInsert" for="nom">Nom de famille</label>
            <div class="input-field">
                <input type="text" id="nom" name="nom"/>
                <i class="far fa-id-card"></i>
            </div>
            <label class="typeInsert" for="phone">Telephone</label>
            <div class="input-field">
                <input type="text" id="phone" name="phone"/>
                <i class="fas fa-phone"></i>
            </div>
            <input type="submit" value="Sauvegarder" class="btn solid" id="bt_change_info"/>
        </form>
    </div>

    <div class="change_password">
        <form class="form_password">
            <h2 class="title">Changer votre mot de passe</h2>
            <label class="typeInsert" for="present_pwd">Mot de passe actuel</label>
            <div class="input-field">
                <input type="password" id="present_pwd" name="present_pwd"/>
                <i class="fas fa-lock"></i>
            </div>
            <label class="typeInsert" for="new_pwd">Nouveau mot de passe</label>
            <div class="input-field">
                <input type="password" id="new_pwd" name="new_pwd"/>
                <i class="fas fa-lock"></i>
            </div>
            <label class="typeInsert" for="new_verif">Confirmation du nouveau mot de passe</label>
            <div class="input-field">
                <input type="password" id="new_verif" name="new_verif"/>
                <i class="fas fa-lock"></i>
            </div>
            <input type="submit" value="Changer" class="btn solid" id="bt_change_password"/>
        </form>
    </div>
</div>

</body>