<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Hello Garage</title>
    <link href="../css/Style-Accueil.css" rel="stylesheet">
    <link href="../css/divider.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <script crossorigin="anonymous" src="https://kit.fontawesome.com/86aa9796b2.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
    <link rel="icon" type="image/png" href="../img/logo_white.png" style="color: white">
    <script src="../js/fonction.js"></script>
    <script>
        $(document).ready(function () {
            let today = new Date();
            let maxDate = new Date();

            let dd = String(today.getDate()).padStart(2, '0');
            let mm = String(today.getMonth() + 1).padStart(2, '0');
            let yyyy = today.getFullYear();

            today = yyyy + '-' + mm + '-' + dd;
            maxDate = (yyyy + 1) + '-' + mm + '-' + dd;
            $('#date').attr('min', today)
            $('#date').attr('max', maxDate)


            let url = new URL(window.location.href);
            let user = url.searchParams.get("user")
            if (user) {
                $.ajax({
                    url: "../bd.php",
                    type: "POST",
                    dataType: "json",
                    data: {
                        "requete": "getCategorie",
                    },
                    success: function (reponse) {
                        reponse.forEach(function (item) {
                            let option = new Option(item['nom_categorie'], item['id']);
                            $('#cat-dropdown').append($(option));


                        });
                    },
                    error: function (reponse) {

                    }
                });
            } else
                window.location.href = "login.html";
        })


    </script>
</head>

<!--Body du site-->
<body style="background-color:#f8f9f9">

<!--Partie principale du site-->
<header>

    <div class="logo_container">
        <img src="Ressources-Supplementaires/logo.png">
    </div>
    <p>Compte > Nouvelle vente</p>
    <div class="searchbar">
        <input class="search_text" name="search_text" placeholder="Recherche..." type="text"/>
        <button class="btSearch"><i class="fas fa-search"></i></button>
    </div>
    <div class="header-user">

        <a id="login-btn" class="login" href="login.html">Se connecter</a>
        <a id="user-btn" class="user-btn" href="signin.html">Créer un compte</a>

    </div>
    </div>


</header>


<!--Partie infos-->

<div class="change_div">
    <div class="change_info">
        <form class="form_info" id="form_info">
            <input type="hidden" id="id_photo">
            <input type="hidden" id="id_adresse">
            <input type="hidden" id="id_vente">
            <h2 class="title">Changer les information</h2>
            <div>
                <img id="couverture" src="Ressources-Supplementaires/error-image-generic.png"
                     style="width:100%; height:300px;"> <br>
                <label for="image">Insérer une image :</label>
                <input type="file" id="image" name="image"required>
                <label class="errorLabel" id="errorImage"></label>
                <script type="text/javascript">
                    function readURL(input) {
                        if (input.files && input.files[0]) {
                            var reader = new FileReader();

                            reader.onload = function (e) {
                                $('#couverture').attr('src', e.target.result);
                            }
                            reader.readAsDataURL(input.files[0]);
                        }
                    }

                    $("#image").change(function () {
                        readURL(this);
                    });
                </script>
            </div>

            <label class="typeInsert" for="titre">Titre</label>
            <div class="input-field">
                <input type="text" id="titre" name="titre"required/>
            </div>
            <label class="errorLabel" id="errorTitre"></label>

            <label class="typeInsert" for="date">Date</label>
            <div class="input-field">
                <input type="date" id="date" name="date" style="width: 100%"required/>
            </div>
            <label class="errorLabel" id="errorDate"></label>

            <label class="typeInsert" for="cat-dropdown">Categorie</label>
            <div class="input-field">
                <select id="cat-dropdown" name="categorie" style="width: 100%"required></select>
            </div>
            <label class="errorLabel" id="errorCAt"></label>
            <h3 class="title">Adresse</h3>
            <label class="typeInsert" for="noRue">Numero de rue</label>
            <div class="input-field">
                <input type="number" id="noRue" name="noRue" min="1" required/>
            </div>
            <label class="errorLabel" id="errorNoRue"></label>

            <label class="typeInsert" for="Rue">Rue</label>
            <div class="input-field">
                <input type="text" id="Rue" name="Rue"required/>
            </div>
            <label class="errorLabel" id="errorRue"></label>


            <label class="typeInsert" for="ville">Ville</label>
            <div class="input-field">
                <input type="text" id="ville" name="ville"required/>
            </div>
            <label class="errorLabel" id="errorVille"></label>


            <label class="typeInsert" for="noRue">Code postal</label>
            <div class="input-field">
                <input type="text" id="codePostal" name="noRue" placeholder="X2X2X2" minlength="6" maxlength="6"
                        required/>
            </div>
            <label class="errorLabel" id="errorCodePostal"></label>


            <input type="submit" value="Créer" class="button solid" id="btn_add_garage"/>
        </form>
    </div>


</div>

</body>