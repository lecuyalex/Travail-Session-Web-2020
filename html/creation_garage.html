<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Hello Garage</title>
    <link href="../css/Style-Accueil.css" rel="stylesheet">
    <link href="../css/divider.css" rel="stylesheet">
    <script crossorigin="anonymous" src="https://kit.fontawesome.com/86aa9796b2.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
    <link rel="icon" type="image/png" href="../img/logo_white.png" style="color: white">
    <script src="../js/fonction.js"></script>
    <script>
        $(document).ready(function () {
            let today = new Date();
            let maxDate = new Date();

            let dd = String(today.getDate()).padStart(2, '0');
            let mm = String(today.getMonth() + 1).padStart(2, '0');
            let yyyy = today.getFullYear();

            today = yyyy + '-' + mm + '-' + dd;
            maxDate = (yyyy + 1) + '-' + mm + '-' + dd;
            $('#date').attr('min', today)
            $('#date').attr('max', maxDate)

            let url = new URL(window.location.href);
            let user = url.searchParams.get("user")
            if (user) {
                $.ajax({
                    url: "../bd.php",
                    type: "POST",
                    dataType: "json",
                    data: {
                        "requete": "getCategorie",
                    },
                    success: function (reponse) {
                        reponse.forEach(function (item) {
                            let option = new Option(item['nom_categorie'], item['id']);
                            $('#cat-dropdown').append($(option));


                        });
                    },
                    error: function (reponse) {

                    }
                });
            } else
                window.location.href = "login.html";
        })
        // Populate dropdown with list of provinces

    </script>
</head>

<!--Body du site-->
<body style="background-color:#f8f9f9">

<!--Partie principale du site-->
<header>

    <div class="logo_container">
        <img src="Ressources-Supplementaires/logo.png">
    </div>
    <p>Compte > Nouvelle vente</p>
    <div class="searchbar">
        <input class="search_text" name="search_text" placeholder="Recherche..." type="text"/>
        <button class="btSearch"><i class="fas fa-search"></i></button>
    </div>
    <div class="header-user">

        <a id="login-btn" class="login" href="login.html">Se connecter</a>
        <a id="user-btn" class="user-btn" href="signin.html">Créer un compte</a>

    </div>
    </div>


</header>


<!--Partie infos-->

<div style="padding:2%; width:50%; margin-left:25%; margin-top:2%; box-shadow: 3px 3px 5px 6px #ccc; border-radius:10px; display:flex; justify-content:space-around;">
    <!--Photo-->

    <div style="width:35%;">
        <img id="couverture" src="" style="width:100%; height:300px;"> <br>
        <label for="image">Insérer une image :</label>
        <input type="file" id="image" name="image">
        <script type="text/javascript">
            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('#couverture').attr('src', e.target.result);
                    }
                    reader.readAsDataURL(input.files[0]);
                }
            }

            $("#image").change(function () {
                readURL(this);
            });
        </script>
    </div>

    <!--Informations-->
    <form enctype="multipart/form-data">
        <div style="width:35%;">

            <input hidden name="requete" value="uploadImage">
            <label for="titre">Titre :</label> <br>
            <input type="text" name="titre" id="titre"> <br><br>
            <label for="date">Date :</label> <br>
            <input type="date" name="date" id="date"> <br><br>
            <div>
                <label>Adresse :</label> <br>
                <label for="noRue">No de rue :</label> <br>
                <input type="text" name="noRue" id="noRue"> <br><br>
                <label for="rue">Rue :</label> <br>
                <input type="text" name="rue" id="rue"> <br><br>
                <label for="ville">Ville :</label> <br>
                <input type="text" name="ville" id="ville"> <br><br>
                <label for="codePostal">Code postal :</label> <br>
                <input type="text" name="codePostal" id="codePostal" minlength="6" maxlength="6"> <br><br>
            </div>
            <label for="cat-dropdown">Categorie :</label> <br>
            <select id="cat-dropdown" name="categorie" style="width: auto"></select> <br><br>

            <input id="btn_add_garage" type="submit" name="confirmer" value="Confirmer"> <br><br>
        </div>
    </form>
</div>


</div>

</body>